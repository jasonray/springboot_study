task definePath { 
  def var = '../karate/build.gradle'
  doLast {
    definePath.ext.variable = var
  }
}
task testbuild(type: GradleBuild) {
  dependsOn 'definePath'
  doFirst { 
    buildFile = definePath.variable
  }
  startParameter.taskNames = ['clean', 'test']
  startParameter.systemPropertiesArgs = ['param': 'value']
}

task testclean(type: Delete) {

  dependsOn 'definePath'
  def buildFile = ''
  doLast { 
    buildFile = definePath.variable
    def buildDir = file(file(buildFile).getParent() + '/build')
    println('deleting: ' +  buildDir.listFiles())
    buildDir.deleteDir()
    // delete buildDir.listFiles()
    // delete fileTree(buildDir).include('**/*')
    println('done.' )
  }
}
